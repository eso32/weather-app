!function(){var t={init:function(){this.cacheDom(),this.bindEvents(),this.buildWeatherWidget(),this.menu()},cacheDom:function(){this.$menu=$(".menu"),this.$hamburger=$(".hamburger"),this.$cross=$(".cross")},bindEvents:function(){$("#search").on("click",this.searchForCity),$("#result").on("click","div.item-found",this.getAPIData),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(this.smoothScroll),$(window).resize(t.refreshMenu.bind(this))},buildWeatherWidget:function(){var e,i="",s=$(".widget"),n=[2459115,753692,721943,2487956,638242,523920,615702];$.each(s,function(s,a){e=$.getJSON("proxy.php",{c:n[s]},function(e){i="",i=t.widgetTemplate(e,i),a.innerHTML=i+"</div>"})})},getWeekday:function(t){var e=new Date,i=e.getDay()+t,s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return i>6&&(i-=6),s[i]},searchForCity:function(){var t=$.trim($("#city").val());if(""!=t){var e=$("#result");e.html('<div class="loader"><div class="spinner"></div></div>'),$("#photoModal").modal("show"),$(this).prop("disabled",!0).css("opacity",.3);var i=encodeURI(t),s=$.getJSON("proxy.php",{city:i},function(t){t.length>0?(e.html(""),$.each(t,function(t,i){e.append('<div class="item-found">'+i.title+"<p>"+i.woeid+"</p></div>")})):(e.html(""),e.append("Nic nie znaleziono :("))}).done(function(){$("#search").prop("disabled",!1).css("opacity",1)}).fail(function(){console.log("Something went wrogn with searchin API: "+s.responseText)})}else $(".notification").toggleClass(" active"),setTimeout(function(){$(".notification").toggleClass(" active")},3e3)},getAPIData:function(){var e=$(this).children("p").text(),i=$("#result"),s="";i.html('<div class="loader"><div class="spinner"></div></div>');var n=$.getJSON("proxy.php",{c:e},function(e){s='<div class="col-md-4"><div class="widget">',s=t.widgetTemplate(e,s),console.log(s),$("#new").before(s+"</div></div></div>"),$("#photoModal").modal("hide")}).fail(function(){console.log("Something went wrong: "+n.status)});i.html('<div class="loader"><div class="spinner"></div></div>')},widgetTemplate:function(e,s){var n=e.consolidated_weather;for(s+='<div class="row"><div class="col-md-12"><h3>'+e.title+'</h3><span class="weather">'+n[0].weather_state_name+'</span><br/><span class="temp">'+Math.round(n[0].the_temp)+'&#176;C</span><img src="https://www.metaweather.com/static/img/weather/'+n[0].weather_state_abbr+'.svg" alt="Weather state"></div></div><div class="row widget-bottom">',i=1;i<=4;i++)s+='<div class="col-xs-3"><span class="date">'+t.getWeekday(i)+'</span><span class="temp-bottom">'+Math.round(n[i].the_temp)+'&#176;C<br/></span><img src="https://www.metaweather.com/static/img/weather/'+n[i].weather_state_abbr+'.svg" alt=""></div>';return s},smoothScroll:function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length&&(t.preventDefault(),$("html, body").animate({scrollTop:e.offset().top},1e3,function(){var t=$(e);if(t.focus(),t.is(":focus"))return!1;t.attr("tabindex","-1"),t.focus()}))}},menu:function(){this.$hamburger.on("click",function(){this.$menu.slideToggle("slow",function(){this.$hamburger.hide(),this.$cross.show()}.bind(this))}.bind(this)),this.$cross.on("click",function(){this.$menu.slideToggle("slow",function(){this.$cross.hide(),this.$hamburger.show()}.bind(this))}.bind(this)),t.refreshMenu()},refreshMenu:function(){window.innerWidth<900?(t.$hamburger.show(),this.$cross.hide(),this.$menu.hide()):(t.$menu.show(),this.$hamburger.hide(),this.$cross.hide())}};t.init()}();